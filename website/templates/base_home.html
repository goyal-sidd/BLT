{% load staticfiles %}
{% load gravatar %}
{% load socialaccount %}
{% load user_score %}
{% providers_media_js %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{% block title %}Bugheist{% endblock %}</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="{% block description %}Bugheist allows anyone to submit an issue from any website. For example if you saw a broken button on Amazon.com you can report the issue on Bugheist and then get a point! The more bugs you find the more points you get. Bugs can be verified for extra points and companies can get involved and help out.{% endblock %}">
        <meta name="author" content="">
        <meta property="og:title" content="{% block og_title %}Bugheist{% endblock %}" />
        <meta property="og:image" content="{% block og_image %}{% static "img/screenshot.png" %}{% endblock %}" />
        <meta property="og:description"  content="{% block og_description %}Bugheist allows anyone to submit an issue from any website. For example if you saw a broken button on Amazon.com you can report the issue on Bugheist and then get a point! The more bugs you find the more points you get. Bugs can be verified for extra points and companies can get involved and help out.{% endblock %}" />
        <meta property="og:type"  content="website" />
        <link href="{% static "vendor/bootstrap/css/bootstrap.css" %}" rel="stylesheet">
        <link href="{% static "css/sb-admin-2.css" %}" rel="stylesheet">
        <link href="{% static "css/style.css" %}" rel="stylesheet">
        <link href="{% static "css/lightbox.min.css" %}" rel="stylesheet">
        <link href="{% static "vendor/font-awesome/css/font-awesome.min.css" %}" rel="stylesheet" type="text/css">
        <link href="{% static "css/animate.css" %}" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet">
        <link href="{% static "css/introjs.css" %}" rel="stylesheet" type="text/css">
        <link href="{% static "css/main.css" %}" rel="stylesheet" type="text/css">
        <link href="{% static "css/text-slider.css" %}" rel="stylesheet" type="text/css">
        <link href="{% static "css/activity.css" %}" rel="stylesheet" type="text/css">
        <script src="{% static "vendor/jquery/jquery.min.js" %}"></script>
        <script src="{% static "js/notify.js" %}"></script>
        <script src="{% static "js/intro.js" %}"></script>
        <script src="{% static "js/text-slider.js" %}"></script>
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        <style>
            {% block style %}
            {% endblock %}
        </style>
    </head>
    <body>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </button>
                  <a class="navbar-brand" href="/">
                      <img src="{% static "img/logo-small-transparent.png" %}">
                  </a>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="https://chrome.google.com/webstore/detail/bugheist/bififchikfckcnblimmncopjinfgccme?hl=en" target="_new">Add to chrome</a></li>
                        <li><a href="/social">Social</a></li>
                        <li><a href="/report">Report Bug</a></li>
                        <li><a href="/start" class="sponsor-hunt">Bug Hunt</a></li>
                        <li><a href="#" id="startTour" class="start-tour">Tour</a></li>

                        {% if request.user.is_authenticated %}
                            <li class="dropdown user-menu">
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                    {% if request.user.userprofile.avatar %}
                                        <img src="{{ request.user.userprofile.avatar }}">
                                    {% elif request.user.socialaccount_set.all.0.get_avatar_url %}
                                        <img src="{{request.user.socialaccount_set.all.0.get_avatar_url}}">
                                    {% else %}
                                        {% gravatar request.user.email 20 %}
                                    {% endif %}
                                    {{request.user.username}} ({{ request.user|score|default:"0" }} Pts) <i class="fa fa-caret-down"></i>
                                </a>
                                <ul class="dropdown-menu dropdown-user">
                                    <li>
                                        <a href="/accounts/profile/">
                                            <i class="fa fa-user fa-fw"></i> User Profile
                                        </a>
                                    </li>
                                    <li>
                                        <a href="/accounts/password/change/">
                                            <i class="fa fa-gear fa-fw"></i> Change Password
                                        </a>
                                    </li>
                                    <li class="divider"></li>
                                    <li>
                                        <a href="/accounts/logout/">
                                            <i class="fa fa-sign-out fa-fw"></i> Logout
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        {% else %}
                            <li><a href="/accounts/signup">Signup</a></li>
                            <li><a href="#login" data-toggle="modal">Login</a></li>
                        {% endif %}
                    </ul>
                    <form class="navbar-form navbar-right" action="/search" method="get">
                        <div class="form-group">
                            <input type="text" name="query" class="form-control" placeholder="Search">
                        </div>
                        <button type="submit" class="btn btn-default">
                            <i class="fa fa-search"></i>
                        </button>
                    </form>
                </div>
            </div>
        </nav>
        <div id="wrapper">            
            <div id="page-wrapper">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6 col-md-offset-3">
                            {% if form.errors %}
                                <div class="alert alert-danger">
                                    {{form.errors}}
                                </div>
                            {% endif %}                            
                        </div>
                        <div class="col-md-12">
                            <form class="navbar-form navbar-right form" action="/issue/" method="post" enctype="multipart/form-data">                            
                                {% csrf_token %}
                                <div class="form-group">
                                    <input class="form-control required" data-intro="Enter the website's complete url where you found the bug." data-step="1" placeholder="www.testsite.com/bug-found" name="url" value="{{form.url.value|default:""}}">
                                </div>
                                <div class="form-group">
                                    <textarea data-required="true" name="description" id="description" data-intro="Describe the nature of bug." data-step="2" class="form-control required" rows="3" placeholder="Describe bug issue">{{form.description.value|default:""}}</textarea>
                                </div>
                                <select data-intro="Categorize the bug." data-step="3" name="label" class="form-control">
                                    <option value="0" selected="selected">Bug Type</option>
                                    <option value="1">Number error</option>
                                    <option value="2">Functional</option>
                                    <option value="3">Performance</option>
                                    <option value="4">Security</option>
                                    <option value="5">Typo</option>
                                    <option value="6">Design</option>
                                </select>
                                <div class="form-group">
                                    <span>
                                        <input type="file" class="required" id='${multipartFilePath}' name="screenshot"/> 
                                        <button class="btn btn-primary" data-intro="Upload a screenshot of the concerned page." data-step="4" name="test_files" type="button">
                                            <i class="fa fa-upload" aria-hidden="true"></i> Upload Screenshot
                                        </button>
                                        <span class="badge badge-important"></span>
                                    </span>                            
                                </div>
                                <button type="submit" class="btn btn-default" data-intro="Click here to report the bug to BugHeist." data-step="5">Report Bug <i class="fa fa-trophy" aria-hidden="true">+3</i></button>
                            </form>
                        </div>
                    </div>

                    {% block content %}
                    {% endblock %}
                </div>
            </div>

            <div id="login" class="modal" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-body text-center">
                            <a href="/">
                                <img src="{% static "img/logo-small-transparent.png" %}">
                            </a>
                            <hr>
                            <a href="/accounts/login">
                                <button class="btn btn-default btn-caution">
                                    <i class="fa fa-envelope fa-2x"></i>
                                </button>
                            </a>
                            <a href="{% provider_login_url "facebook" method="js_sdk" %}">
                                <button class="btn btn-default btn-caution">
                                    <i class="fa fa-facebook fa-2x"></i>
                                </button>
                            </a>
                            <a href="{% provider_login_url "google" method="js_sdk" %}">
                                <button class="btn btn-default btn-caution">
                                    <i class="fa fa-google fa-2x"></i>
                                </button>
                            </a>
                            <a href="{% provider_login_url "github" method="js_sdk" %}">
                                <button class="btn btn-default btn-caution">
                                    <i class="fa fa-github fa-2x"></i>
                                </button>
                            </a>
                            <p>Sign in using any of the services listed above and start winning prizes for reporting bugs.</p>
                        </div>
                    </div>
                </div>
            </div>

            <footer id="myFooter">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-3">
                            <center><img src ="{% static "img/logo.png" %}"></center>
                        </div>
                        <div class="col-sm-3">
                            <ul>
                                <li><a href="/about" target="_new">About</a></li>
                                <li><a href="/stats">Stats</a></li>
                            </ul>
                        </div>
                        <div class="col-sm-3">
                            <ul>
                                <li><a href="/scoreboard" target="_new">Company Scoreboard</a></li>
                                <li><a href="/terms">Terms of Service</a></li>
                            </ul>
                        </div>
                        <div class="col-sm-3">
                            <div class="social-networks">
                                <a href="http://twitter.com/bugheist" target="_new"><i class="fa fa-twitter"></i></a>
                                <a href="http://facebook.com/bugheist" target="_new"><i class="fa fa-facebook"></i></a>
                                <a href="http://github.com/bugheist/website" target="_new"><i class="fa fa-github"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer-blt">
                    <a href="https://www.owasp.org/index.php/OWASP_Bug_Logging_Tool" target="_new"><p>Powered by OWASP Bug Logging Tool</p>
                    </a>
                </div>
            </footer>
            <script src="{% static "vendor/bootstrap/js/bootstrap.min.js" %}"></script>
            {% block after_js %}
            {% endblock %}
            {% if messages %}
                {% for message in messages %}
                    <script> $.notify("{{ message }}",{ position: 'top center', className: "{{message.level_tag }}" }); </script>
                {% endfor %}
            {% endif %}
            <script src="{% static 'js/ui.js' %}"></script>
            <script>
                var message = "{{not_verified}}"
                if(message!=''){
                  $.notify(message,{ position: 'top center', className: "" }); 
                }
            </script>
            <script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
              ga('create', 'UA-66634107-1', 'auto');
              ga('send', 'pageview');
            </script>
            <script type="text/javascript">
                $(function() {
                    $('button[name="test_files"]').on('click', function() {
                        $(this).parent().find('input[type=file]').click();
                    });
                    $('input[name="screenshot"]').on('change', function() {
                        var file = $(this).val().replace('C:\\fakepath\\', '');
                        $(this).parent().find('span').html(file);
                    });
                });
            </script>
        </div>
    </body>
</html>
